<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warmtefonds Rekenvoorbeeld</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }
        .calculator-container {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        input[type="number"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .info-text {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        .result-box {
            background-color: #e9f5e9;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #d4eac2;
            text-align: center;
        }
        .result-box h3 {
            margin-top: 0;
            color: #333;
        }
        .result-amount {
            font-size: 2em;
            color: #2e7d32;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="calculator-container">
    <h2>Rekenvoorbeeld Energiebespaarlening</h2>
    <p>Bereken eenvoudig je maandtermijn voor een Energiebespaarlening van het Warmtefonds.</p>
    
    <div class="form-group">
        <label for="income-level">Gezamenlijk verzamelinkomen:</label>
        <select id="income-level">
            <option value="low">Max. €60.000 (0% rente)</option>
            <option value="high">Boven €60.000 (variabele rente)</option>
        </select>
        <p class="info-text">Het rentepercentage is afhankelijk van je inkomen. Kies de optie die op jou van toepassing is.</p>
    </div>

    <div class="form-group">
        <label for="loan-amount">Gewenst leenbedrag (€):</label>
        <input type="number" id="loan-amount" value="10000" min="1000" max="28000">
        <p class="info-text">Minimaal €1.000 en maximaal €28.000.</p>
    </div>

    <div class="form-group">
        <label for="loan-term">Looptijd (jaren):</label>
        <select id="loan-term">
            <option value="7">7 jaar</option>
            <option value="10">10 jaar</option>
            <option value="15">15 jaar</option>
            <option value="20">20 jaar (alleen bij leenbedrag > €15.000)</option>
        </select>
    </div>

    <div class="result-box">
        <h3>Geschatte maandtermijn:</h3>
        <p class="result-amount" id="monthly-payment">€ 0,00</p>
        <p class="info-text" id="disclaimer"></p>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Rentetarieven (voorbeelden, raadpleeg altijd de actuele tarieven!)
        const interestRates = {
            '7': 0.0401,   // 4,01%
            '10': 0.0406,  // 4,06%
            '15': 0.0411,  // 4,11%
            '20': 0.0416   // 4,16%
        };

        const incomeLevelSelect = document.getElementById('income-level');
        const loanAmountInput = document.getElementById('loan-amount');
        const loanTermSelect = document.getElementById('loan-term');
        const monthlyPaymentOutput = document.getElementById('monthly-payment');
        const disclaimerText = document.getElementById('disclaimer');

        function calculateMonthlyPayment() {
            const loanAmount = parseFloat(loanAmountInput.value);
            const loanTerm = parseInt(loanTermSelect.value);
            const incomeLevel = incomeLevelSelect.value;
            
            // Check voorwaarden
            if (loanAmount < 1000 || loanAmount > 28000) {
                monthlyPaymentOutput.textContent = '€ 0,00';
                disclaimerText.textContent = 'Vul een leenbedrag in tussen €1.000 en €28.000.';
                return;
            }
            if (loanTerm === 20 && loanAmount <= 15000) {
                monthlyPaymentOutput.textContent = '€ 0,00';
                disclaimerText.textContent = 'Een looptijd van 20 jaar is alleen mogelijk bij een leenbedrag boven de €15.000.';
                return;
            }

            let monthlyRate = 0;
            if (incomeLevel === 'low') {
                monthlyRate = 0; // 0% rente
                disclaimerText.textContent = 'Dit is een rentevrije lening (0% rente). Je betaalt alleen de aflossing.';
            } else {
                // Bereken maandelijkse rente op basis van jaarlijkse rente
                const annualRate = interestRates[loanTerm] || 0;
                monthlyRate = annualRate / 12;
                disclaimerText.textContent = `Deze berekening is gebaseerd op een jaarlijkse rente van ${ (annualRate * 100).toFixed(2) }%. De actuele rentetarieven kunnen afwijken.`;
            }

            const numberOfPayments = loanTerm * 12;

            let monthlyPayment;
            if (monthlyRate === 0) {
                monthlyPayment = loanAmount / numberOfPayments;
            } else {
                monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            }

            if (!isFinite(monthlyPayment)) {
                monthlyPaymentOutput.textContent = '€ 0,00';
                disclaimerText.textContent = 'Controleer je invoer. De berekening is niet mogelijk.';
            } else {
                monthlyPaymentOutput.textContent = `€ ${monthlyPayment.toFixed(2).replace('.', ',')}`;
            }
        }

        // Voeg event listeners toe aan de invoervelden om de berekening te triggeren
        loanAmountInput.addEventListener('input', calculateMonthlyPayment);
        loanTermSelect.addEventListener('change', calculateMonthlyPayment);
        incomeLevelSelect.addEventListener('change', calculateMonthlyPayment);

        // Voer de initiële berekening uit bij het laden van de pagina
        calculateMonthlyPayment();
    });
</script>

</body>
</html>
