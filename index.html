<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warmtefonds Rekenvoorbeeld</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }
        .calculator-container {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        input[type="number"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .info-text {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        .result-box {
            background-color: #e9f5e9;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #d4eac2;
            text-align: center;
            margin-top: 20px;
        }
        .result-box h3 {
            margin-top: 0;
            color: #333;
        }
        .result-amount {
            font-size: 2em;
            color: #2e7d32;
            font-weight: bold;
        }
        .hidden {
            display: none;
        }
        .cta-button {
            display: block;
            width: 100%;
            padding: 15px;
            text-align: center;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 1.1em;
            margin-top: 20px;
        }
        .cta-button:hover {
            background-color: #0056b3;
        }
        .info-section {
            background-color: #f8f8f8;
            border-left: 3px solid #007bff;
            padding: 15px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<div class="calculator-container">
    <h2>Rekenvoorbeeld Energiebespaarlening</h2>
    <p>Bereken eenvoudig je maandtermijn voor een Energiebespaarlening van het Warmtefonds.</p>
    
    <div class="info-section">
        <p>De rente op de Energiebespaarlening is afhankelijk van je gezamenlijk verzamelinkomen. Bij een inkomen tot € 60.000 betaal je **0% rente**. Is je inkomen hoger, dan wordt er een variabele rente gerekend, die vaststaat gedurende de gehele looptijd.</p>
    </div>

    <div class="form-group">
        <label for="income-over-60k">
            <input type="checkbox" id="income-over-60k">
            Is uw gezamenlijk verzamelinkomen hoger dan € 60.000 per jaar?
        </label>
        <p class="info-text">Bij een inkomen tot € 60.000 is de rente 0%.</p>
    </div>
    
    <div class="form-group hidden" id="income-range-group">
        <label for="income-range">Kies uw inkomensgroep:</label>
        <select id="income-range">
            <option value="60-70k">€60.000 - €70.000</option>
            <option value="70-80k">€70.000 - €80.000</option>
            <option value="80k-plus">Meer dan €80.000</option>
        </select>
    </div>

    <div class="form-group">
        <label for="loan-amount">Gewenst leenbedrag (€):</label>
        <input type="number" id="loan-amount" value="10000" min="1000" max="28000">
        <p class="info-text">Minimaal €1.000 en maximaal €28.000.</p>
    </div>

    <div class="form-group">
        <label for="loan-term">Looptijd (jaren):</label>
        <select id="loan-term">
            <option value="7">7 jaar</option>
            <option value="10">10 jaar</option>
            <option value="15">15 jaar</option>
            <option value="20">20 jaar (alleen bij leenbedrag > €15.000)</option>
        </select>
    </div>

    <div class="result-box">
        <h3>Geschatte maandtermijn:</h3>
        <p class="result-amount" id="monthly-payment">€ 0,00</p>
        <p class="info-text" id="disclaimer"></p>
    </div>
    
    <a href="https://aanvraag.warmtefonds.nl/1?substep=0" class="cta-button" target="_blank">Direct aanvragen</a>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // BELANGRIJK: Pas deze rentetarieven aan met de meest actuele tarieven van het Warmtefonds
        const interestRates = {
            'low': 0.0,
            '60-70k': { '7': 0.0250, '10': 0.0260, '15': 0.0270, '20': 0.0280 },
            '70-80k': { '7': 0.0300, '10': 0.0310, '15': 0.0320, '20': 0.0330 },
            '80k-plus': { '7': 0.0350, '10': 0.0360, '15': 0.0370, '20': 0.0380 }
        };

        const incomeCheckbox = document.getElementById('income-over-60k');
        const incomeRangeGroup = document.getElementById('income-range-group');
        const incomeRangeSelect = document.getElementById('income-range');
        const loanAmountInput = document.getElementById('loan-amount');
        const loanTermSelect = document.getElementById('loan-term');
        const monthlyPaymentOutput = document.getElementById('monthly-payment');
        const disclaimerText = document.getElementById('disclaimer');

        function toggleIncomeDropdown() {
            if (incomeCheckbox.checked) {
                incomeRangeGroup.classList.remove('hidden');
            } else {
                incomeRangeGroup.classList.add('hidden');
            }
            calculateMonthlyPayment();
        }

        function calculateMonthlyPayment() {
            const loanAmount = parseFloat(loanAmountInput.value);
            const loanTerm = parseInt(loanTermSelect.value);
            const isHighIncome = incomeCheckbox.checked;

            if (loanAmount < 1000 || loanAmount > 28000) {
                monthlyPaymentOutput.textContent = '€ 0,00';
                disclaimerText.textContent = 'Vul een leenbedrag in tussen €1.000 en €28.000.';
                return;
            }
            if (loanTerm === 20 && loanAmount <= 15000) {
                monthlyPaymentOutput.textContent = '€ 0,00';
                disclaimerText.textContent = 'Een looptijd van 20 jaar is alleen mogelijk bij een leenbedrag boven de €15.000.';
                return;
            }

            let monthlyRate = 0;
            let annualRate = 0;
            let incomeGroup = isHighIncome ? incomeRangeSelect.value : 'low';

            if (incomeGroup === 'low') {
                monthlyRate = 0;
                disclaimerText.textContent = 'Dit is een rentevrije lening (0% rente). Je betaalt alleen de aflossing.';
            } else {
                annualRate = interestRates[incomeGroup][loanTerm] || 0;
                monthlyRate = annualRate / 12;
                disclaimerText.textContent = `Deze berekening is gebaseerd op een jaarlijkse rente van ${(annualRate * 100).toFixed(2)}%. De actuele rentetarieven kunnen afwijken.`;
            }

            const numberOfPayments = loanTerm * 12;

            let monthlyPayment;
            if (monthlyRate === 0) {
                monthlyPayment = loanAmount / numberOfPayments;
            } else {
                monthlyPayment = (loanAmount * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -numberOfPayments));
            }

            if (!isFinite(monthlyPayment)) {
                monthlyPaymentOutput.textContent = '€ 0,00';
                disclaimerText.textContent = 'Controleer je invoer. De berekening is niet mogelijk.';
            } else {
                monthlyPaymentOutput.textContent = `€ ${monthlyPayment.toFixed(2).replace('.', ',')}`;
            }
        }

        incomeCheckbox.addEventListener('change', toggleIncomeDropdown);
        incomeRangeSelect.addEventListener('change', calculateMonthlyPayment);
        loanAmountInput.addEventListener('input', calculateMonthlyPayment);
        loanTermSelect.addEventListener('change', calculateMonthlyPayment);

        toggleIncomeDropdown();
    });
</script>

</body>
</html>
